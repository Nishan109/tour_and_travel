<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard - TravelTrip</title>
    
    <!-- Modern Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom Modern Styles -->
    <link rel="stylesheet" href="{% static 'css/modern-style.css' %}">
</head>
<body>
    <!-- Modern Navigation -->
    <nav class="modern-navbar">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <a href="{% url 'home' %}" class="navbar-brand">
                    <i class="fas fa-plane-departure me-2"></i>TravelTrip
                </a>
                
                <ul class="nav d-flex align-items-center">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'dashboard' %}">
                            <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'flights' %}">
                            <i class="fas fa-plane me-1"></i>Flights
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'hotels' %}">
                            <i class="fas fa-bed me-1"></i>Hotels
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'package' %}">
                            <i class="fas fa-suitcase me-1"></i>Packages
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'places' %}">
                            <i class="fas fa-map-marker-alt me-1"></i>Places
                        </a>
                    </li>
                    <li class="nav-item ms-3">
                        <a class="btn btn-outline-modern" href="{% url 'logout' %}">
                            <i class="fas fa-sign-out-alt me-1"></i>Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-5">
        <!-- Dashboard Header -->
        <div class="dashboard-header fade-in">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="welcome-message">
                        <i class="fas fa-user-circle me-2"></i>
                        Welcome back, {{ user.first_name|default:user.username }}!
                    </h1>
                    <p class="text-muted mb-0">Manage your bookings and plan your next adventure</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <div class="d-flex gap-2 justify-content-md-end">
                        <a href="{% url 'flights' %}" class="btn btn-primary-modern">
                            <i class="fas fa-plus me-1"></i>New Booking
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="user-stats mb-5 slide-up">
            <div class="stat-card">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <div class="stat-number">{{ flights.count }}</div>
                        <div class="stat-label">Flight Bookings</div>
                    </div>
                    <i class="fas fa-plane fa-2x opacity-50"></i>
                </div>
            </div>
            <div class="stat-card">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <div class="stat-number">{{ hotels.count }}</div>
                        <div class="stat-label">Hotel Bookings</div>
                    </div>
                    <i class="fas fa-bed fa-2x opacity-50"></i>
                </div>
            </div>
            <div class="stat-card">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <div class="stat-number">{{ packages.count }}</div>
                        <div class="stat-label">Package Bookings</div>
                    </div>
                    <i class="fas fa-suitcase fa-2x opacity-50"></i>
                </div>
            </div>
        </div>

        <!-- Flight Bookings -->
        {% if flights %}
        <div class="mb-5 slide-up" style="animation-delay: 0.1s;">
            <div class="d-flex align-items-center justify-content-between mb-4">
                <h2 class="h3 mb-0">
                    <i class="fas fa-plane me-2 text-primary"></i>
                    Your Flight Bookings
                </h2>
                <a href="{% url 'flights' %}" class="btn btn-outline-modern">
                    <i class="fas fa-plus me-1"></i>Book New Flight
                </a>
            </div>
            
            <div class="row g-3">
                {% for flight in flights %}
                <div class="col-lg-6">
                    <div class="ticket-card">
                        <div class="ticket-header">
                            <div class="airline-info">
                                <div class="airline-logo">
                                    <i class="fas fa-plane"></i>
                                </div>
                                <div>
                                    <div class="flight-number">{{ flight.flight }}</div>
                                    <small class="text-muted">Flight Booking</small>
                                </div>
                            </div>
                            <div class="text-end">
                                <small class="text-muted">{{ flight.date }}</small>
                            </div>
                        </div>
                        
                        <div class="ticket-body">
                            <div class="flight-detail">
                                <div class="detail-label">Seats</div>
                                <div class="detail-value">{{ flight.seat }}</div>
                            </div>
                            <div class="flight-detail">
                                <div class="detail-label">Status</div>
                                <div class="detail-value">
                                    <span class="badge bg-success">Confirmed</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex gap-2 mt-3">
                            <a href="/cancelflight/{{ flight.flight }}/{{ flight.date }}/{{ flight.seat }}" 
                               class="btn btn-outline-danger btn-sm">
                                <i class="fas fa-times me-1"></i>Cancel
                            </a>
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-info-circle me-1"></i>Details
                            </button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div class="mb-5 slide-up" style="animation-delay: 0.1s;">
            <div class="modern-card text-center">
                <i class="fas fa-plane fa-3x text-muted mb-3"></i>
                <h3 class="h4 mb-3">No Flight Bookings Yet</h3>
                <p class="text-muted mb-4">Start your journey by booking your first flight</p>
                <a href="{% url 'flights' %}" class="btn btn-primary-modern">
                    <i class="fas fa-search me-2"></i>Search Flights
                </a>
            </div>
        </div>
        {% endif %}

        <!-- Hotel Bookings -->
        {% if hotels %}
        <div class="mb-5 slide-up" style="animation-delay: 0.2s;">
            <div class="d-flex align-items-center justify-content-between mb-4">
                <h2 class="h3 mb-0">
                    <i class="fas fa-bed me-2 text-success"></i>
                    Your Hotel Bookings
                </h2>
                <a href="{% url 'hotels' %}" class="btn btn-outline-modern">
                    <i class="fas fa-plus me-1"></i>Book New Hotel
                </a>
            </div>
            
            <div class="row g-3">
                {% for hotel in hotels %}
                <div class="col-lg-6">
                    <div class="ticket-card">
                        <div class="ticket-header">
                            <div class="airline-info">
                                <div class="airline-logo bg-success">
                                    <i class="fas fa-bed"></i>
                                </div>
                                <div>
                                    <div class="flight-number">{{ hotel.hotel_name }}</div>
                                    <small class="text-muted">Hotel Booking</small>
                                </div>
                            </div>
                            <div class="text-end">
                                <small class="text-muted">{{ hotel.date }}</small>
                            </div>
                        </div>
                        
                        <div class="ticket-body">
                            <div class="flight-detail">
                                <div class="detail-label">Rooms</div>
                                <div class="detail-value">{{ hotel.room }}</div>
                            </div>
                            <div class="flight-detail">
                                <div class="detail-label">Status</div>
                                <div class="detail-value">
                                    <span class="badge bg-success">Confirmed</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex gap-2 mt-3">
                            <a href="/cancelhotel/{{ hotel.hotel_name }}/{{ hotel.date }}/{{ hotel.room }}" 
                               class="btn btn-outline-danger btn-sm">
                                <i class="fas fa-times me-1"></i>Cancel
                            </a>
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-info-circle me-1"></i>Details
                            </button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div class="mb-5 slide-up" style="animation-delay: 0.2s;">
            <div class="modern-card text-center">
                <i class="fas fa-bed fa-3x text-muted mb-3"></i>
                <h3 class="h4 mb-3">No Hotel Bookings Yet</h3>
                <p class="text-muted mb-4">Find the perfect place to stay for your trip</p>
                <a href="{% url 'hotels' %}" class="btn btn-primary-modern">
                    <i class="fas fa-search me-2"></i>Search Hotels
                </a>
            </div>
        </div>
        {% endif %}

        <!-- Package Bookings -->
        {% if packages %}
        <div class="mb-5 slide-up" style="animation-delay: 0.3s;">
            <div class="d-flex align-items-center justify-content-between mb-4">
                <h2 class="h3 mb-0">
                    <i class="fas fa-suitcase me-2 text-warning"></i>
                    Your Package Bookings
                </h2>
                <a href="{% url 'package' %}" class="btn btn-outline-modern">
                    <i class="fas fa-plus me-1"></i>Book New Package
                </a>
            </div>
            
            <div class="row g-3">
                {% for package in packages %}
                <div class="col-lg-6">
                    <div class="ticket-card">
                        <div class="ticket-header">
                            <div class="airline-info">
                                <div class="airline-logo bg-warning">
                                    <i class="fas fa-suitcase"></i>
                                </div>
                                <div>
                                    <div class="flight-number">{{ package.flight }} + {{ package.hotel_name }}</div>
                                    <small class="text-muted">Package Booking</small>
                                </div>
                            </div>
                            <div class="text-end">
                                <small class="text-muted">{{ package.date }}</small>
                            </div>
                        </div>
                        
                        <div class="ticket-body">
                            <div class="flight-detail">
                                <div class="detail-label">Seats</div>
                                <div class="detail-value">{{ package.seat }}</div>
                            </div>
                            <div class="flight-detail">
                                <div class="detail-label">Rooms</div>
                                <div class="detail-value">{{ package.room }}</div>
                            </div>
                            <div class="flight-detail">
                                <div class="detail-label">Status</div>
                                <div class="detail-value">
                                    <span class="badge bg-success">Confirmed</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex gap-2 mt-3">
                            <a href="/cancelpackage/{{ package.flight }}/{{ package.seat }}/{{ package.hotel_name }}/{{ package.date }}/{{ package.room }}" 
                               class="btn btn-outline-danger btn-sm">
                                <i class="fas fa-times me-1"></i>Cancel
                            </a>
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-info-circle me-1"></i>Details
                            </button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div class="mb-5 slide-up" style="animation-delay: 0.3s;">
            <div class="modern-card text-center">
                <i class="fas fa-suitcase fa-3x text-muted mb-3"></i>
                <h3 class="h4 mb-3">No Package Bookings Yet</h3>
                <p class="text-muted mb-4">Save money with our complete travel packages</p>
                <a href="{% url 'package' %}" class="btn btn-primary-modern">
                    <i class="fas fa-gift me-2"></i>Browse Packages
                </a>
            </div>
        </div>
        {% endif %}

        <!-- Quick Actions -->
        <div class="slide-up" style="animation-delay: 0.4s;">
            <div class="modern-card">
                <h3 class="h4 mb-4">
                    <i class="fas fa-bolt me-2 text-primary"></i>
                    Quick Actions
                </h3>
                <div class="row g-3">
                    <div class="col-md-3">
                        <a href="{% url 'flights' %}" class="btn btn-outline-modern w-100">
                            <i class="fas fa-plane me-2"></i>
                            <div>Book Flight</div>
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'hotels' %}" class="btn btn-outline-modern w-100">
                            <i class="fas fa-bed me-2"></i>
                            <div>Book Hotel</div>
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'package' %}" class="btn btn-outline-modern w-100">
                            <i class="fas fa-suitcase me-2"></i>
                            <div>Book Package</div>
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'places' %}" class="btn btn-outline-modern w-100">
                            <i class="fas fa-map-marker-alt me-2"></i>
                            <div>Explore Places</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS for animations -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Animate elements on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe all slide-up elements
            document.querySelectorAll('.slide-up').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                el.style.transition = 'all 0.6s ease-out';
                observer.observe(el);
            });
        });
    </script>
</body>
</html>